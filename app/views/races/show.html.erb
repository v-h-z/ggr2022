<div style='position: absolute; z-index: 100;'>
  <ul>
    <% speeds = @race.boats.map{_1.positions.last}.map(&:sog).map(&:to_f) %>
    <% speeds.delete(0.0) %>
    <% temps = @race.boats.map{_1.positions.last}.map(&:temperature).map(&:to_f) %>
    <% temps.delete(0.0) %>
    <li>Avg Speed across fleet: <%= (speeds.sum/speeds.count).round(2) %> knts</li>
    <li>Avg Temp across fleet: <%= (temps.sum/temps.count).round(2) %> °C</li>
    <li>Temp range: <%= temps.minmax.join(' - ') %> °C</li>
    <li>Fastest avg speed: <%= @race.boats.sort_by{_1.positions.map(&:sog).map(&:to_f).sum/_1.positions.count}.reverse.first.name %></li>
  </ul>
</div>
<div style="width: 100%; height: 100vh;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
</div>
